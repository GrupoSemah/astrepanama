---
interface Props {
  title?: string;
}

const { title = "Contacto" } = Astro.props;

const ingresoOptions = [
  "de 3 a 5k",
  "de 5 a 7k",
  "de 7 a 10k+"
];
---

<footer id="contacto" class="w-full left-0 right-0 bottom-0 bg-primary text-white mt-0 mb-0">
  <div class="container mx-auto px-6 py-12 pb-0 lg:py-16 lg:pb-0">
    <div class="grid grid-cols-1 md:grid-cols-12 gap-8 lg:gap-12">
      <div class="md:col-span-4 flex flex-col items-center md:items-start">
        <div class="mb-6">
          <img src="/icons/svg/logoastre.svg" alt="Astre Logo" class="h-16" />
        </div>

        <div class="hidden md:block text-white/80 space-y-3 mt-6">
          <p>Calle Principal #123</p>
          <p>Ciudad de Panamá</p>
          <p>info@astre.com</p>
          <p>+507 123-4567</p>
        </div>
      </div>

      <div class="md:col-span-8">
        <div class="text-center md:text-left mb-8">
          <h2
            class="text-2xl md:text-3xl font-bold"
            style="font-family: var(--font-heading);"
          >
            Bríndanos tus datos para contactarte y enviarte información
            detallada del proyecto
          </h2>
        </div>

        <form id="contact-form" class="flex flex-col gap-5 mb-8">
          <div class="grid grid-cols-1 md:grid-cols-2 gap-5">
            <div class="form-group">
              <input
                type="text"
                name="nombre"
                id="nombre"
                placeholder="Nombre y Apellido"
                class="w-full bg-transparent border border-white/50 rounded-full px-6 py-4 text-white placeholder:text-white/70 focus:outline-none focus:border-white"
                required
              />
            </div>

            <div class="form-group">
              <input
                type="tel"
                name="telefono"
                id="telefono"
                placeholder="Número de teléfono"
                class="w-full bg-transparent border border-white/50 rounded-full px-6 py-4 text-white placeholder:text-white/70 focus:outline-none focus:border-white"
                required
              />
            </div>
          </div>

          <div class="grid grid-cols-1 md:grid-cols-2 gap-5">
            <div class="form-group">
              <input
                type="email"
                name="email"
                id="email"
                placeholder="Correo Electrónico"
                class="w-full bg-transparent border border-white/50 rounded-full px-6 py-4 text-white placeholder:text-white/70 focus:outline-none focus:border-white"
                required
              />
            </div>

            <div class="form-group relative">
              <select
                name="ingreso"
                id="ingreso"
                class="w-full bg-transparent border border-white/50 rounded-full px-6 py-4 text-white appearance-none focus:outline-none focus:border-white cursor-pointer"
                required
              >
                <option value="" disabled selected class="bg-primary"
                  >Ingreso Familiar</option
                >
                {
                  ingresoOptions.map((option) => (
                    <option value={option} class="bg-primary">
                      {option}
                    </option>
                  ))
                }
              </select>
              <div
                class="absolute right-6 top-1/2 transform -translate-y-1/2 pointer-events-none"
              >
                <svg
                  width="16"
                  height="16"
                  viewBox="0 0 16 16"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    d="M4 6L8 10L12 6"
                    stroke="white"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"></path>
                </svg>
              </div>
            </div>
          </div>

          <div class="flex flex-col items-center mt-6">
            <button
              type="submit"
              class="group w-full md:w-auto bg-primary text-white border border-white rounded-full py-2 px-8 font-medium flex items-center justify-center gap-3 hover:bg-secondary hover:text-primary transition-colors"
            >
              <span class="text-lg">enviar</span>
              <svg
                width="20"
                height="20"
                viewBox="0 0 24 24"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
                class="transition-transform duration-300 group-hover:rotate-90"
              >
                <path
                  d="M7 17L17 7M17 7H7M17 7V17"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"></path>
              </svg>
            </button>
            
            <div class="flex justify-center mt-6 cursor-pointer">
              <a
                href="https://instagram.com/astre"
                target="_blank"
                rel="noopener noreferrer"
                class="flex items-center gap-2 hover:opacity-80 transition-opacity"
              >
                <img src="/icons/svg/instagram.svg" alt="Instagram" width="28" height="28" />
              </a>
            </div>
          </div>
        </form>
      </div>
    </div>

    <div class="border-t border-white/20 my-4"></div>

    <div
      class="flex flex-col md:flex-row justify-between items-center text-sm text-white/60 mb-0"
    >
      <div class="flex gap-4 mb-4 md:mb-0">
        <button id="terms-link" class="hover:text-white transition-colors text-left"
          >Términos legales</button
        >
        <button id="privacy-link" class="hover:text-white transition-colors text-left"
          >Política de Privacidad</button
        >
      </div>

      <div>© 2025 Astre. Todos los derechos reservados.</div>
    </div>
  </div>
</footer>

<script is:inline>
  // Script para manejar formulario de contacto
  document.addEventListener('DOMContentLoaded', function() {
    const contactForm = document.getElementById("contact-form");
    if (contactForm) {
      contactForm.addEventListener("submit", function(e) {
        e.preventDefault();

        const form = e.target;
        const formData = new FormData(form);
        
        const formValues = {};
        formData.forEach(function(value, key) {
          formValues[key] = value;
        });

        console.log("Datos del formulario:", formValues);
        
        // fetch('/api/contact', {
        //   method: 'POST',
        //   headers: { 'Content-Type': 'application/json' },
        //   body: JSON.stringify(formValues)
        // });
      });
    }
  });


  // Configuración de los botones de términos y privacidad
  document.addEventListener('DOMContentLoaded', function() {
    const termsLink = document.getElementById('terms-link');
    const privacyLink = document.getElementById('privacy-link');

    if (termsLink) {
      termsLink.addEventListener('click', function() {
        // Disparar evento personalizado para abrir términos
        var event = new CustomEvent('openInfoModal', {
          detail: { type: 'terms' }
        });
        document.dispatchEvent(event);
      });
    }

    if (privacyLink) {
      privacyLink.addEventListener('click', function() {
        // Disparar evento personalizado para abrir privacidad
        var event = new CustomEvent('openInfoModal', {
          detail: { type: 'privacy' }
        });
        document.dispatchEvent(event);
      });
    }
  });
</script>
